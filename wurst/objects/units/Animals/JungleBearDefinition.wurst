package JungleBearDefinition

// Standard library imports:
import Assets
import ObjectIds
import UnitObjEditing
import LinkedList

// Local imports:
import LocalObjectIDs

constant JUNGLE_BEAR_ABIL = commaList('AOCN', ABILITY_BASH) // Bear Block, Bash

constant tamedBearAbilities = asList(
    ABILITY_PET_REVIVE_INFO,
    ABILITY_PET_DAMAGE_UPGD,
    ABILITY_PET_ARMOR_UPGD,
    ABILITY_PET_MAGIC_RESIST_UPGD,
    ABILITY_PET_HEALTH_UPGD,
    ABILITY_PET_BASH_UPGD,
    ABILITY_PET_BASH,
    ABILITY_PET_SNACK
)

constant tamedBearUpgrades = asList(
    UPGD_PET_ATTACK_DAMAGE,
    UPGD_PET_ARMOR,
    UPGD_PET_MAGIC_RESISTANCE,
    UPGD_PET_HEALTH,
    UPGD_PET_BASH
)

constant TAMED_BEAR_ABIL = tamedBearAbilities.joinBy((int i) -> i.toRawCode(), ",")
constant TAMED_BEAR_UPGD = tamedBearUpgrades.joinBy((int i) -> i.toRawCode(), ",")

class JungleBearDefinition extends UnitDefinition
    construct(int unitId)
        super(unitId, UnitIds.giantpolarbear)
        this.setNormalAbilities(JUNGLE_BEAR_ABIL)
        this.setAttack1DamageBase(15)
        this.setDefenseBase(3)
        this.setAcquisitionRange(200)
        this.setScalingValue(1.25)
        this.setTintingColorRed(150)
        this.setTintingColorBlue(150)
        this.setMovementType(MovementType.Foot)
        this.setSpeedBase(270)
        this.setGoldBountyAwardedBase(0)
        this.setGoldBountyAwardedNumberofDice(0)
        this.setGoldBountyAwardedSidesperDie(0)
        this.setHideMinimapDisplay(true)
        this.setFoodCost(0)
        this.setLevel(8)
        this.setHitPointsMaximumBase(255)
        this.setSightRadiusDay(200)
        this.setSightRadiusNight(200)
        this.setRace(Race.Orc)
        this.setPointValue(300)
        this.setTooltipBasic("Raw meat that needs to be cooked")
        this.setName("Jungle Bear")
        this.setNameEditorSuffix("(Wurst)")
        this.setManaMaximum(30)


class AdolescentBearDefinition extends JungleBearDefinition
    construct(int unitId)
        super(unitId)
        this.setNormalAbilities(TAMED_BEAR_ABIL)
        this.setUpgradesUsed(TAMED_BEAR_UPGD)
        // Those 2 fields computed the time it takes to cast a spell
        // it is used to adjust the cast time following the unit spell animation
        this.setAnimationCastPoint(0.2)
        this.setAnimationCastBackswing(0.2)
        this.setLevel(0)
        this.setAttack1CooldownTime(1.5)
        this.setName("Tamed Jungle Bear")
        this.setHitPointsRegenerationRate(0)
        this.setFoodCost(0)
        this.setAttack1DamageUpgradeAmount(1)
        this.setDefenseUpgradeBonus(1)
        this.setManaMaximum(100)


@compiletime function createJungleBear()
    new JungleBearDefinition(UNIT_JUNGLE_BEAR)
    new AdolescentBearDefinition(UNIT_TAMED_BEAR)
